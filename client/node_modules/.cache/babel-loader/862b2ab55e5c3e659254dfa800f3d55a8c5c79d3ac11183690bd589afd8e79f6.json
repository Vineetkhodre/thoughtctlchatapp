{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _Utils = _interopRequireDefault(require(\"./Utils\"));\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar querystring = require(\"querystring\");\n/**\n * Provides access to the `ShortCode` endpoint.\n */\n\nclass ShortCode {\n  static get PATH() {\n    return \"/sc/us/${type}/json\";\n  }\n  static get ERROR_MESSAGES() {\n    return {\n      to: \"Invalid to address\",\n      msgParams: \"Invalid shortcode message parameters\"\n    };\n  }\n  /**\n   * @param {Credentials} credentials\n   *    credentials to be used when interacting with the API.\n   * @param {Object} options\n   *    Additional ShortCode options.\n   */\n\n  constructor(credentials) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.creds = credentials;\n    this.options = options;\n  }\n  _sendRequest(endpoint, method, callback) {\n    endpoint.path = endpoint.path + (endpoint.path.indexOf(\"?\") > 0 ? \"&\" : \"?\") + querystring.stringify({\n      api_key: this.creds.apiKey,\n      api_secret: this.creds.apiSecret\n    });\n    this.options.httpClient.request(endpoint, method, callback);\n  }\n  _sendViaShortcode(type, recipient, messageParams, opts, callback) {\n    if (!recipient) {\n      _Utils.default.sendError(callback, new Error(ShortCode.ERROR_MESSAGES.to));\n    }\n    if (!messageParams || !Object.keys(messageParams)) {\n      _Utils.default.sendError(callback, new Error(ShortCode.ERROR_MESSAGES.msgParams));\n    }\n    opts = opts || {};\n    var path = ShortCode.PATH.replace(\"${type}\", type);\n    Object.keys(messageParams).forEach(function (key) {\n      opts[key] = messageParams[key];\n    });\n    opts.to = recipient;\n    path += \"?\" + querystring.stringify(opts);\n    this.options.logger.info(\"sending message from shortcode \" + type + \" to \" + recipient + \" with parameters \" + JSON.stringify(messageParams));\n    this._sendRequest({\n      host: this.options.restHost || \"rest.nexmo.com\",\n      path: path\n    }, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n        _Utils.default.sendError(callback, new Error(apiResponse.messages[0][\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n  shortcodeAlert(recipient, messageParams, opts, callback) {\n    this._sendViaShortcode(\"alert\", recipient, messageParams, opts, callback);\n  }\n  shortcode2FA(recipient, messageParams, opts, callback) {\n    this._sendViaShortcode(\"2fa\", recipient, messageParams, opts, callback);\n  }\n  shortcodeMarketing(recipient, messageParams, opts, callback) {\n    this._sendViaShortcode(\"marketing\", recipient, messageParams, opts, callback);\n  }\n}\nvar _default = ShortCode;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"names":["_Utils","_interopRequireDefault","require","querystring","ShortCode","PATH","ERROR_MESSAGES","to","msgParams","constructor","credentials","options","arguments","length","undefined","creds","_sendRequest","endpoint","method","callback","path","indexOf","stringify","api_key","apiKey","api_secret","apiSecret","httpClient","request","_sendViaShortcode","type","recipient","messageParams","opts","default","sendError","Error","Object","keys","replace","forEach","key","logger","info","JSON","host","restHost","err","apiResponse","status","messages","shortcodeAlert","shortcode2FA","shortcodeMarketing"],"sources":["/Users/vineetkhodre/react-workspace/thoughtctlchatapp/node_modules/@vonage/server-sdk/src/ShortCode.js"],"sourcesContent":["\"use strict\";\n\nimport Utils from \"./Utils\";\n\nvar querystring = require(\"querystring\");\n\n/**\n * Provides access to the `ShortCode` endpoint.\n */\nclass ShortCode {\n  static get PATH() {\n    return \"/sc/us/${type}/json\";\n  }\n\n  static get ERROR_MESSAGES() {\n    return {\n      to: \"Invalid to address\",\n      msgParams: \"Invalid shortcode message parameters\",\n    };\n  }\n\n  /**\n   * @param {Credentials} credentials\n   *    credentials to be used when interacting with the API.\n   * @param {Object} options\n   *    Additional ShortCode options.\n   */\n  constructor(credentials, options = {}) {\n    this.creds = credentials;\n    this.options = options;\n  }\n\n  _sendRequest(endpoint, method, callback) {\n    endpoint.path =\n      endpoint.path +\n      (endpoint.path.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\n      querystring.stringify({\n        api_key: this.creds.apiKey,\n        api_secret: this.creds.apiSecret,\n      });\n    this.options.httpClient.request(endpoint, method, callback);\n  }\n\n  _sendViaShortcode(type, recipient, messageParams, opts, callback) {\n    if (!recipient) {\n      Utils.sendError(callback, new Error(ShortCode.ERROR_MESSAGES.to));\n    }\n    if (!messageParams || !Object.keys(messageParams)) {\n      Utils.sendError(callback, new Error(ShortCode.ERROR_MESSAGES.msgParams));\n    }\n    opts = opts || {};\n    var path = ShortCode.PATH.replace(\"${type}\", type);\n    Object.keys(messageParams).forEach(function (key) {\n      opts[key] = messageParams[key];\n    });\n    opts.to = recipient;\n    path += \"?\" + querystring.stringify(opts);\n    this.options.logger.info(\n      \"sending message from shortcode \" +\n        type +\n        \" to \" +\n        recipient +\n        \" with parameters \" +\n        JSON.stringify(messageParams)\n    );\n    this._sendRequest(\n      {\n        host: this.options.restHost || \"rest.nexmo.com\",\n        path: path,\n      },\n      \"POST\",\n      function (err, apiResponse) {\n        if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n          Utils.sendError(\n            callback,\n            new Error(apiResponse.messages[0][\"error-text\"]),\n            apiResponse\n          );\n        } else {\n          if (callback) callback(err, apiResponse);\n        }\n      }\n    );\n  }\n\n  shortcodeAlert(recipient, messageParams, opts, callback) {\n    this._sendViaShortcode(\"alert\", recipient, messageParams, opts, callback);\n  }\n  shortcode2FA(recipient, messageParams, opts, callback) {\n    this._sendViaShortcode(\"2fa\", recipient, messageParams, opts, callback);\n  }\n  shortcodeMarketing(recipient, messageParams, opts, callback) {\n    this._sendViaShortcode(\n      \"marketing\",\n      recipient,\n      messageParams,\n      opts,\n      callback\n    );\n  }\n}\n\nexport default ShortCode;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}