{"ast":null,"code":"\"use strict\";\n\nvar querystring = require(\"querystring\");\nvar msgpath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sms/json\"\n};\nvar shortcodePath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sc/us/${type}/json\"\n};\nvar ttsEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts/json\"\n};\nvar ttsPromptEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts-prompt/json\"\n};\nvar callEndpoint = {\n  host: \"rest.nexmo.com\",\n  path: \"/call/json\"\n};\nvar verifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/json\"\n};\nvar checkVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/check/json\"\n};\nvar controlVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/control/json\"\n};\nvar searchVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/search/json\"\n};\nvar niEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/async/json\"\n};\nvar niBasicEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/basic/json\"\n};\nvar niStandardEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/standard/json\"\n};\nvar niAdvancedEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/json\"\n};\nvar up = {};\nvar numberPattern = new RegExp(\"^[0-9 +()-]*$\");\nvar _options = null; // Error message resources are maintained globally in one place for easy management\n\nvar ERROR_MESSAGES = {\n  sender: \"Invalid from address\",\n  to: \"Invalid to address\",\n  msg: \"Invalid Text Message\",\n  msgParams: \"Invalid shortcode message parameters\",\n  countrycode: \"Invalid Country Code\",\n  msisdn: \"Invalid MSISDN passed\",\n  body: \"Invalid Body value in Binary Message\",\n  udh: \"Invalid udh value in Binary Message\",\n  title: \"Invalid title in WAP Push message\",\n  url: \"Invalid url in WAP Push message\",\n  maxDigits: \"Invalid max digits for TTS prompt\",\n  byeText: \"Invalid bye text for TTS prompt\",\n  pinCode: \"Invalid pin code for TTS confirm\",\n  failedText: \"Invalid failed text for TTS confirm\",\n  answerUrl: \"Invalid answer URL for call\",\n  verifyValidation: \"Missing Mandatory fields (number and/or brand)\",\n  checkVerifyValidation: \"Missing Mandatory fields (request_id and/or code)\",\n  controlVerifyValidation: \"Missing Mandatory fields (request_id and/or cmd-command)\",\n  searchVerifyValidation: \"Missing Mandatory fields (request_id or request_ids)\",\n  numberInsightAdvancedValidation: \"Missing Mandatory fields (number and/or callback url)\",\n  numberInsightValidation: \"Missing Mandatory field - number\",\n  numberInsightPatternFailure: \"Number can contain digits and may include any or all of the following: white space, -,+, (, ).\",\n  optionsNotAnObject: \"Options parameter should be a dictionary. Check the docs for valid properties for options\",\n  product: \"Invalid product. Should be one of [voice, sms]\"\n};\nexports.initialize = function (pkey, psecret, options) {\n  // These can default to empty as we may provide a private key for JWT auth\n  // In that situation, private key and secret are not required. If you don't provide\n  // A key/secret and try and make a request you'll get a 401 error back\n  pkey = pkey || \"\";\n  psecret = psecret || \"\";\n  up = {\n    api_key: pkey,\n    api_secret: psecret\n  };\n  _options = options;\n  if (_options.restHost) {\n    msgpath.host = _options.restHost;\n    shortcodePath.host = _options.restHost;\n    callEndpoint.host = _options.restHost;\n  }\n  if (_options.apiHost) {\n    ttsEndpoint.host = _options.apiHost;\n    ttsPromptEndpoint.host = _options.apiHost;\n    verifyEndpoint.host = _options.apiHost;\n    checkVerifyEndpoint.host = _options.apiHost;\n    controlVerifyEndpoint.host = _options.apiHost;\n    searchVerifyEndpoint.host = _options.apiHost;\n    niEndpoint.host = _options.apiHost;\n    niBasicEndpoint.host = _options.apiHost;\n    niStandardEndpoint.host = _options.apiHost;\n    niAdvancedEndpoint.host = _options.apiHost;\n  }\n};\nexports.sendBinaryMessage = function (sender, recipient, body, udh, callback) {\n  if (!body) {\n    sendError(callback, new Error(ERROR_MESSAGES.body));\n  } else if (!udh) {\n    sendError(callback, new Error(ERROR_MESSAGES.udh));\n  } else {\n    sendMessage({\n      from: sender,\n      to: recipient,\n      type: \"binary\",\n      body: body,\n      udh: udh\n    }, callback);\n  }\n};\nexports.sendWapPushMessage = function (sender, recipient, title, url, validity, callback) {\n  if (!title) {\n    sendError(callback, new Error(ERROR_MESSAGES.title));\n  } else if (!url) {\n    sendError(callback, new Error(ERROR_MESSAGES.url));\n  } else {\n    if (typeof validity === \"function\") {\n      callback = validity;\n      validity = 86400000;\n    }\n    sendMessage({\n      from: sender,\n      to: recipient,\n      type: \"wappush\",\n      title: title,\n      validity: validity,\n      url: url\n    }, callback);\n  }\n};\nexports.sendTextMessage = function (sender, recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    opts[\"from\"] = sender;\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendMessage(opts, callback);\n  }\n};\nexports.sendMessage = function (opts, callback) {\n  sendMessage(opts, callback);\n};\nfunction sendMessage(data, callback) {\n  if (!data.from) {\n    sendError(callback, new Error(ERROR_MESSAGES.sender));\n  } else if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var path = clone(msgpath);\n    path.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\"sending message from \" + data.from + \" to \" + data.to + \" with message \" + data.text);\n    sendRequest(path, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n        sendError(callback, new Error(apiResponse.messages[0][\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\nfunction sendViaShortcode(type, recipient, messageParams, opts, callback) {\n  if (!recipient) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  }\n  if (!messageParams || !Object.keys(messageParams)) {\n    sendError(callback, new Error(ERROR_MESSAGES.msgParams));\n  }\n  opts = opts || {};\n  var path = clone(shortcodePath);\n  path.path = path.path.replace(\"${type}\", type);\n  Object.keys(messageParams).forEach(function (key) {\n    opts[key] = messageParams[key];\n  });\n  opts.to = recipient;\n  path.path += \"?\" + querystring.stringify(opts);\n  _options.logger.info(\"sending message from shortcode \" + type + \" to \" + recipient + \" with parameters \" + JSON.stringify(messageParams));\n  sendRequest(path, \"POST\", function (err, apiResponse) {\n    if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n      sendError(callback, new Error(apiResponse.messages[0][\"error-text\"]), apiResponse);\n    } else {\n      if (callback) callback(err, apiResponse);\n    }\n  });\n}\nexports.shortcodeAlert = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"alert\", recipient, messageParams, opts, callback);\n};\nexports.shortcode2FA = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"2fa\", recipient, messageParams, opts, callback);\n};\nexports.shortcodeMarketing = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"marketing\", recipient, messageParams, opts, callback);\n};\nfunction clone(a) {\n  return JSON.parse(JSON.stringify(a));\n}\nfunction getEndpoint(action) {\n  return {\n    path: action\n  };\n}\nfunction sendRequest(endpoint, method, callback) {\n  endpoint.path = endpoint.path + (endpoint.path.indexOf(\"?\") > 0 ? \"&\" : \"?\") + querystring.stringify(up);\n  _options.httpClient.request(endpoint, method, callback);\n}\nexports.checkBalance = function (callback) {\n  var balanceEndpoint = getEndpoint(\"/account/get-balance\");\n  sendRequest(balanceEndpoint, callback);\n};\nexports.getNumbers = function (options, callback) {\n  var numbersEndpoint = getEndpoint(\"/account/numbers\");\n  if (typeof options === \"function\") {\n    callback = options;\n  } else if (typeof options === \"object\") {\n    numbersEndpoint.path = numbersEndpoint.path + \"?\";\n    for (var key in options) {\n      numbersEndpoint.path = numbersEndpoint.path + key + \"=\" + options[key] + \"&\";\n    }\n  } else {\n    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));\n    return;\n  }\n  sendRequest(numbersEndpoint, callback);\n};\nexports.searchNumbers = function (countryCode, pattern, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else {\n    var searchEndpoint = getEndpoint(\"/number/search\");\n    searchEndpoint.path += \"?country=\" + countryCode;\n    if (typeof pattern === \"function\") {\n      callback = pattern;\n    } else if (typeof pattern === \"object\") {\n      searchEndpoint.path = searchEndpoint.path + \"&\";\n      for (var arg in pattern) {\n        searchEndpoint.path = searchEndpoint.path + arg + \"=\" + pattern[arg] + \"&\";\n      }\n    } else {\n      searchEndpoint.path = searchEndpoint.path + \"&pattern=\" + pattern;\n    }\n    sendRequest(searchEndpoint, callback);\n  }\n};\nexports.buyNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length != 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var buyEndpoint = getEndpoint(\"/number/buy\");\n    buyEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(buyEndpoint, \"POST\", callback);\n  }\n};\nexports.cancelNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\nexports.cancelNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\nexports.updateNumber = function (countryCode, msisdn, params, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var updateEndpoint = getEndpoint(\"/number/update\");\n    updateEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    updateEndpoint.path = updateEndpoint.path + \"&\";\n    for (var arg in params) {\n      updateEndpoint.path = updateEndpoint.path + arg + \"=\" + encodeURIComponent(params[arg]) + \"&\";\n    }\n    sendRequest(updateEndpoint, \"POST\", callback);\n  }\n};\nexports.changePassword = function (newSecret, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?newSecret=\" + encodeURIComponent(newSecret);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\nexports.changeMoCallbackUrl = function (newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?moCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\nexports.changeDrCallbackUrl = function (newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?drCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\nexports.verifyNumber = function (inputParams, callback) {\n  if (!inputParams.number || !inputParams.brand) {\n    sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));\n  } else {\n    var vEndpoint = clone(verifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\nexports.checkVerifyRequest = function (inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.code) {\n    sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));\n  } else {\n    var vEndpoint = clone(checkVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\nexports.controlVerifyRequest = function (inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.cmd) {\n    sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));\n  } else {\n    var vEndpoint = clone(controlVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\nexports.searchVerifyRequest = function (requestIds, callback) {\n  var requestIdParam = {};\n  if (!requestIds) {\n    sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));\n  } else {\n    if (Array.isArray(requestIds)) {\n      if (requestIds.length === 1) {\n        requestIdParam.request_id = requestIds;\n      } else {\n        requestIdParam.request_ids = requestIds;\n      }\n    } else {\n      requestIdParam.request_id = requestIds;\n    }\n    var vEndpoint = clone(searchVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(requestIdParam);\n    sendRequest(vEndpoint, callback);\n  }\n};\nexports.numberInsight = function (inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\nexports.numberInsightBasic = function (inputParams, callback) {\n  numberInsightCommon(niBasicEndpoint, inputParams, callback);\n};\nexports.numberInsightStandard = function (inputParams, callback) {\n  numberInsightCommon(niStandardEndpoint, inputParams, callback);\n};\nexports.numberInsightAdvanced = function (inputParams, callback) {\n  numberInsightCommon(niAdvancedEndpoint, inputParams, callback);\n};\nexports.numberInsightAdvancedAsync = function (inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\nfunction numberInsightAsync(inputParams, callback) {\n  if (!inputParams.number || !inputParams.callback) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightAdvancedValidation));\n  } else {\n    var nEndpoint = clone(niEndpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(nEndpoint, callback);\n  }\n}\nfunction numberInsightCommon(endpoint, inputParams, callback) {\n  if (validateNumber(inputParams, callback)) {\n    var inputObj;\n    if (typeof inputParams !== \"object\") {\n      inputObj = {\n        number: inputParams\n      };\n    } else {\n      inputObj = inputParams;\n    }\n    var nEndpoint = clone(endpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputObj);\n    sendRequest(nEndpoint, callback);\n  }\n}\nfunction validateNumber(inputParams, callback) {\n  if (typeof inputParams === \"object\" && !inputParams.number) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));\n    return false;\n  } else if (typeof inputParams === \"object\" && !numberPattern.test(inputParams.number)) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  } else if (typeof inputParams !== \"object\" && (!inputParams || !numberPattern.test(inputParams))) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  }\n  return true;\n}\nfunction sendVoiceMessage(voiceEndpoint, data, callback) {\n  if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var endpoint = clone(voiceEndpoint);\n    endpoint.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\"sending TTS message to \" + data.to + \" with message \" + data.text);\n    sendRequest(endpoint, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.status > 0) {\n        sendError(callback, new Error(apiResponse[\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\nexports.sendTTSMessage = function (recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendVoiceMessage(ttsEndpoint, opts, callback);\n  }\n};\nexports.sendTTSPromptWithCapture = function (recipient, message, maxDigits, byeText, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"bye_text\"] = byeText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\nexports.sendTTSPromptWithConfirm = function (recipient, message, maxDigits, pinCode, byeText, failedText, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!pinCode || pinCode.length !== maxDigits) {\n    sendError(callback, new Error(ERROR_MESSAGES.pinCode));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else if (!failedText) {\n    sendError(callback, new Error(ERROR_MESSAGES.failedText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"pin_code\"] = pinCode;\n    opts[\"bye_text\"] = byeText;\n    opts[\"failed_text\"] = failedText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\nexports.call = function (recipient, answerUrl, opts, callback) {\n  if (!answerUrl) {\n    sendError(callback, new Error(ERROR_MESSAGES.answerUrl));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"answer_url\"] = answerUrl;\n    sendVoiceMessage(callEndpoint, opts, callback);\n  }\n};\nfunction sendError(callback, err, returnData) {\n  // Throw the error in case if there is no callback passed\n  if (callback) {\n    callback(err, returnData);\n  } else {\n    throw err;\n  }\n}","map":{"version":3,"names":["querystring","require","msgpath","host","path","shortcodePath","ttsEndpoint","ttsPromptEndpoint","callEndpoint","verifyEndpoint","checkVerifyEndpoint","controlVerifyEndpoint","searchVerifyEndpoint","niEndpoint","niBasicEndpoint","niStandardEndpoint","niAdvancedEndpoint","up","numberPattern","RegExp","_options","ERROR_MESSAGES","sender","to","msg","msgParams","countrycode","msisdn","body","udh","title","url","maxDigits","byeText","pinCode","failedText","answerUrl","verifyValidation","checkVerifyValidation","controlVerifyValidation","searchVerifyValidation","numberInsightAdvancedValidation","numberInsightValidation","numberInsightPatternFailure","optionsNotAnObject","product","exports","initialize","pkey","psecret","options","api_key","api_secret","restHost","apiHost","sendBinaryMessage","recipient","callback","sendError","Error","sendMessage","from","type","sendWapPushMessage","validity","sendTextMessage","message","opts","data","clone","stringify","logger","info","text","sendRequest","err","apiResponse","status","messages","sendViaShortcode","messageParams","Object","keys","replace","forEach","key","JSON","shortcodeAlert","shortcode2FA","shortcodeMarketing","a","parse","getEndpoint","action","endpoint","method","indexOf","httpClient","request","checkBalance","balanceEndpoint","getNumbers","numbersEndpoint","searchNumbers","countryCode","pattern","length","searchEndpoint","arg","buyNumber","buyEndpoint","cancelNumber","cancelEndpoint","updateNumber","params","updateEndpoint","encodeURIComponent","changePassword","newSecret","settingsEndpoint","changeMoCallbackUrl","newUrl","changeDrCallbackUrl","verifyNumber","inputParams","number","brand","vEndpoint","checkVerifyRequest","request_id","code","controlVerifyRequest","cmd","searchVerifyRequest","requestIds","requestIdParam","Array","isArray","request_ids","numberInsight","numberInsightAsync","numberInsightBasic","numberInsightCommon","numberInsightStandard","numberInsightAdvanced","numberInsightAdvancedAsync","nEndpoint","validateNumber","inputObj","test","sendVoiceMessage","voiceEndpoint","sendTTSMessage","sendTTSPromptWithCapture","isNaN","sendTTSPromptWithConfirm","call","returnData"],"sources":["/Users/vineetkhodre/react-workspace/thoughtctlchatapp/node_modules/@vonage/server-sdk/src/index.js"],"sourcesContent":["\"use strict\";\n\nvar querystring = require(\"querystring\");\n\nvar msgpath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sms/json\",\n};\nvar shortcodePath = {\n  host: \"rest.nexmo.com\",\n  path: \"/sc/us/${type}/json\",\n};\nvar ttsEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts/json\",\n};\nvar ttsPromptEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/tts-prompt/json\",\n};\nvar callEndpoint = {\n  host: \"rest.nexmo.com\",\n  path: \"/call/json\",\n};\nvar verifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/json\",\n};\nvar checkVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/check/json\",\n};\nvar controlVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/control/json\",\n};\nvar searchVerifyEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/verify/search/json\",\n};\nvar niEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/async/json\",\n};\nvar niBasicEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/basic/json\",\n};\nvar niStandardEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/standard/json\",\n};\nvar niAdvancedEndpoint = {\n  host: \"api.nexmo.com\",\n  path: \"/ni/advanced/json\",\n};\nvar up = {};\nvar numberPattern = new RegExp(\"^[0-9 +()-]*$\");\n\nvar _options = null;\n\n// Error message resources are maintained globally in one place for easy management\nvar ERROR_MESSAGES = {\n  sender: \"Invalid from address\",\n  to: \"Invalid to address\",\n  msg: \"Invalid Text Message\",\n  msgParams: \"Invalid shortcode message parameters\",\n  countrycode: \"Invalid Country Code\",\n  msisdn: \"Invalid MSISDN passed\",\n  body: \"Invalid Body value in Binary Message\",\n  udh: \"Invalid udh value in Binary Message\",\n  title: \"Invalid title in WAP Push message\",\n  url: \"Invalid url in WAP Push message\",\n  maxDigits: \"Invalid max digits for TTS prompt\",\n  byeText: \"Invalid bye text for TTS prompt\",\n  pinCode: \"Invalid pin code for TTS confirm\",\n  failedText: \"Invalid failed text for TTS confirm\",\n  answerUrl: \"Invalid answer URL for call\",\n  verifyValidation: \"Missing Mandatory fields (number and/or brand)\",\n  checkVerifyValidation: \"Missing Mandatory fields (request_id and/or code)\",\n  controlVerifyValidation:\n    \"Missing Mandatory fields (request_id and/or cmd-command)\",\n  searchVerifyValidation:\n    \"Missing Mandatory fields (request_id or request_ids)\",\n  numberInsightAdvancedValidation:\n    \"Missing Mandatory fields (number and/or callback url)\",\n  numberInsightValidation: \"Missing Mandatory field - number\",\n  numberInsightPatternFailure:\n    \"Number can contain digits and may include any or all of the following: white space, -,+, (, ).\",\n  optionsNotAnObject:\n    \"Options parameter should be a dictionary. Check the docs for valid properties for options\",\n  product: \"Invalid product. Should be one of [voice, sms]\",\n};\n\nexports.initialize = function (pkey, psecret, options) {\n  // These can default to empty as we may provide a private key for JWT auth\n  // In that situation, private key and secret are not required. If you don't provide\n  // A key/secret and try and make a request you'll get a 401 error back\n  pkey = pkey || \"\";\n  psecret = psecret || \"\";\n\n  up = {\n    api_key: pkey,\n    api_secret: psecret,\n  };\n  _options = options;\n\n  if (_options.restHost) {\n    msgpath.host = _options.restHost;\n    shortcodePath.host = _options.restHost;\n    callEndpoint.host = _options.restHost;\n  }\n\n  if (_options.apiHost) {\n    ttsEndpoint.host = _options.apiHost;\n    ttsPromptEndpoint.host = _options.apiHost;\n    verifyEndpoint.host = _options.apiHost;\n    checkVerifyEndpoint.host = _options.apiHost;\n    controlVerifyEndpoint.host = _options.apiHost;\n    searchVerifyEndpoint.host = _options.apiHost;\n    niEndpoint.host = _options.apiHost;\n    niBasicEndpoint.host = _options.apiHost;\n    niStandardEndpoint.host = _options.apiHost;\n    niAdvancedEndpoint.host = _options.apiHost;\n  }\n};\n\nexports.sendBinaryMessage = function (sender, recipient, body, udh, callback) {\n  if (!body) {\n    sendError(callback, new Error(ERROR_MESSAGES.body));\n  } else if (!udh) {\n    sendError(callback, new Error(ERROR_MESSAGES.udh));\n  } else {\n    sendMessage(\n      {\n        from: sender,\n        to: recipient,\n        type: \"binary\",\n        body: body,\n        udh: udh,\n      },\n      callback\n    );\n  }\n};\n\nexports.sendWapPushMessage = function (\n  sender,\n  recipient,\n  title,\n  url,\n  validity,\n  callback\n) {\n  if (!title) {\n    sendError(callback, new Error(ERROR_MESSAGES.title));\n  } else if (!url) {\n    sendError(callback, new Error(ERROR_MESSAGES.url));\n  } else {\n    if (typeof validity === \"function\") {\n      callback = validity;\n      validity = 86400000;\n    }\n    sendMessage(\n      {\n        from: sender,\n        to: recipient,\n        type: \"wappush\",\n        title: title,\n        validity: validity,\n        url: url,\n      },\n      callback\n    );\n  }\n};\n\nexports.sendTextMessage = function (\n  sender,\n  recipient,\n  message,\n  opts,\n  callback\n) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!callback) {\n      callback = opts;\n      opts = {};\n    }\n    opts[\"from\"] = sender;\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendMessage(opts, callback);\n  }\n};\n\nexports.sendMessage = function (opts, callback) {\n  sendMessage(opts, callback);\n};\nfunction sendMessage(data, callback) {\n  if (!data.from) {\n    sendError(callback, new Error(ERROR_MESSAGES.sender));\n  } else if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var path = clone(msgpath);\n    path.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\n      \"sending message from \" +\n        data.from +\n        \" to \" +\n        data.to +\n        \" with message \" +\n        data.text\n    );\n    sendRequest(path, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n        sendError(\n          callback,\n          new Error(apiResponse.messages[0][\"error-text\"]),\n          apiResponse\n        );\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\n\nfunction sendViaShortcode(type, recipient, messageParams, opts, callback) {\n  if (!recipient) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  }\n  if (!messageParams || !Object.keys(messageParams)) {\n    sendError(callback, new Error(ERROR_MESSAGES.msgParams));\n  }\n  opts = opts || {};\n  var path = clone(shortcodePath);\n  path.path = path.path.replace(\"${type}\", type);\n  Object.keys(messageParams).forEach(function (key) {\n    opts[key] = messageParams[key];\n  });\n  opts.to = recipient;\n  path.path += \"?\" + querystring.stringify(opts);\n  _options.logger.info(\n    \"sending message from shortcode \" +\n      type +\n      \" to \" +\n      recipient +\n      \" with parameters \" +\n      JSON.stringify(messageParams)\n  );\n  sendRequest(path, \"POST\", function (err, apiResponse) {\n    if (!err && apiResponse.status && apiResponse.messages[0].status > 0) {\n      sendError(\n        callback,\n        new Error(apiResponse.messages[0][\"error-text\"]),\n        apiResponse\n      );\n    } else {\n      if (callback) callback(err, apiResponse);\n    }\n  });\n}\nexports.shortcodeAlert = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"alert\", recipient, messageParams, opts, callback);\n};\nexports.shortcode2FA = function (recipient, messageParams, opts, callback) {\n  sendViaShortcode(\"2fa\", recipient, messageParams, opts, callback);\n};\nexports.shortcodeMarketing = function (\n  recipient,\n  messageParams,\n  opts,\n  callback\n) {\n  sendViaShortcode(\"marketing\", recipient, messageParams, opts, callback);\n};\n\nfunction clone(a) {\n  return JSON.parse(JSON.stringify(a));\n}\n\nfunction getEndpoint(action) {\n  return { path: action };\n}\n\nfunction sendRequest(endpoint, method, callback) {\n  endpoint.path =\n    endpoint.path +\n    (endpoint.path.indexOf(\"?\") > 0 ? \"&\" : \"?\") +\n    querystring.stringify(up);\n  _options.httpClient.request(endpoint, method, callback);\n}\n\nexports.checkBalance = function (callback) {\n  var balanceEndpoint = getEndpoint(\"/account/get-balance\");\n  sendRequest(balanceEndpoint, callback);\n};\n\nexports.getNumbers = function (options, callback) {\n  var numbersEndpoint = getEndpoint(\"/account/numbers\");\n  if (typeof options === \"function\") {\n    callback = options;\n  } else if (typeof options === \"object\") {\n    numbersEndpoint.path = numbersEndpoint.path + \"?\";\n    for (var key in options) {\n      numbersEndpoint.path =\n        numbersEndpoint.path + key + \"=\" + options[key] + \"&\";\n    }\n  } else {\n    sendError(callback, new Error(ERROR_MESSAGES.optionsNotAnObject));\n    return;\n  }\n  sendRequest(numbersEndpoint, callback);\n};\n\nexports.searchNumbers = function (countryCode, pattern, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else {\n    var searchEndpoint = getEndpoint(\"/number/search\");\n    searchEndpoint.path += \"?country=\" + countryCode;\n    if (typeof pattern === \"function\") {\n      callback = pattern;\n    } else if (typeof pattern === \"object\") {\n      searchEndpoint.path = searchEndpoint.path + \"&\";\n      for (var arg in pattern) {\n        searchEndpoint.path =\n          searchEndpoint.path + arg + \"=\" + pattern[arg] + \"&\";\n      }\n    } else {\n      searchEndpoint.path = searchEndpoint.path + \"&pattern=\" + pattern;\n    }\n    sendRequest(searchEndpoint, callback);\n  }\n};\n\nexports.buyNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length != 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var buyEndpoint = getEndpoint(\"/number/buy\");\n    buyEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(buyEndpoint, \"POST\", callback);\n  }\n};\n\nexports.cancelNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\n\nexports.cancelNumber = function (countryCode, msisdn, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var cancelEndpoint = getEndpoint(\"/number/cancel\");\n    cancelEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    sendRequest(cancelEndpoint, \"POST\", callback);\n  }\n};\n\nexports.updateNumber = function (countryCode, msisdn, params, callback) {\n  if (!countryCode || countryCode.length !== 2) {\n    sendError(callback, new Error(ERROR_MESSAGES.countrycode));\n  } else if (!msisdn) {\n    sendError(callback, new Error(ERROR_MESSAGES.msisdn));\n  } else {\n    var updateEndpoint = getEndpoint(\"/number/update\");\n    updateEndpoint.path += \"?country=\" + countryCode + \"&msisdn=\" + msisdn;\n    updateEndpoint.path = updateEndpoint.path + \"&\";\n    for (var arg in params) {\n      updateEndpoint.path =\n        updateEndpoint.path + arg + \"=\" + encodeURIComponent(params[arg]) + \"&\";\n    }\n    sendRequest(updateEndpoint, \"POST\", callback);\n  }\n};\n\nexports.changePassword = function (newSecret, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?newSecret=\" + encodeURIComponent(newSecret);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.changeMoCallbackUrl = function (newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?moCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.changeDrCallbackUrl = function (newUrl, callback) {\n  var settingsEndpoint = getEndpoint(\"/account/settings\");\n  settingsEndpoint.path += \"?drCallBackUrl=\" + encodeURIComponent(newUrl);\n  sendRequest(settingsEndpoint, \"POST\", callback);\n};\n\nexports.verifyNumber = function (inputParams, callback) {\n  if (!inputParams.number || !inputParams.brand) {\n    sendError(callback, new Error(ERROR_MESSAGES.verifyValidation));\n  } else {\n    var vEndpoint = clone(verifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.checkVerifyRequest = function (inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.code) {\n    sendError(callback, new Error(ERROR_MESSAGES.checkVerifyValidation));\n  } else {\n    var vEndpoint = clone(checkVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.controlVerifyRequest = function (inputParams, callback) {\n  if (!inputParams.request_id || !inputParams.cmd) {\n    sendError(callback, new Error(ERROR_MESSAGES.controlVerifyValidation));\n  } else {\n    var vEndpoint = clone(controlVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.searchVerifyRequest = function (requestIds, callback) {\n  var requestIdParam = {};\n  if (!requestIds) {\n    sendError(callback, new Error(ERROR_MESSAGES.searchVerifyValidation));\n  } else {\n    if (Array.isArray(requestIds)) {\n      if (requestIds.length === 1) {\n        requestIdParam.request_id = requestIds;\n      } else {\n        requestIdParam.request_ids = requestIds;\n      }\n    } else {\n      requestIdParam.request_id = requestIds;\n    }\n    var vEndpoint = clone(searchVerifyEndpoint);\n    vEndpoint.path += \"?\" + querystring.stringify(requestIdParam);\n    sendRequest(vEndpoint, callback);\n  }\n};\n\nexports.numberInsight = function (inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\n\nexports.numberInsightBasic = function (inputParams, callback) {\n  numberInsightCommon(niBasicEndpoint, inputParams, callback);\n};\n\nexports.numberInsightStandard = function (inputParams, callback) {\n  numberInsightCommon(niStandardEndpoint, inputParams, callback);\n};\n\nexports.numberInsightAdvanced = function (inputParams, callback) {\n  numberInsightCommon(niAdvancedEndpoint, inputParams, callback);\n};\n\nexports.numberInsightAdvancedAsync = function (inputParams, callback) {\n  numberInsightAsync(inputParams, callback);\n};\n\nfunction numberInsightAsync(inputParams, callback) {\n  if (!inputParams.number || !inputParams.callback) {\n    sendError(\n      callback,\n      new Error(ERROR_MESSAGES.numberInsightAdvancedValidation)\n    );\n  } else {\n    var nEndpoint = clone(niEndpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputParams);\n    sendRequest(nEndpoint, callback);\n  }\n}\n\nfunction numberInsightCommon(endpoint, inputParams, callback) {\n  if (validateNumber(inputParams, callback)) {\n    var inputObj;\n    if (typeof inputParams !== \"object\") {\n      inputObj = { number: inputParams };\n    } else {\n      inputObj = inputParams;\n    }\n    var nEndpoint = clone(endpoint);\n    nEndpoint.path += \"?\" + querystring.stringify(inputObj);\n    sendRequest(nEndpoint, callback);\n  }\n}\nfunction validateNumber(inputParams, callback) {\n  if (typeof inputParams === \"object\" && !inputParams.number) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightValidation));\n    return false;\n  } else if (\n    typeof inputParams === \"object\" &&\n    !numberPattern.test(inputParams.number)\n  ) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  } else if (\n    typeof inputParams !== \"object\" &&\n    (!inputParams || !numberPattern.test(inputParams))\n  ) {\n    sendError(callback, new Error(ERROR_MESSAGES.numberInsightPatternFailure));\n    return false;\n  }\n  return true;\n}\n\nfunction sendVoiceMessage(voiceEndpoint, data, callback) {\n  if (!data.to) {\n    sendError(callback, new Error(ERROR_MESSAGES.to));\n  } else {\n    var endpoint = clone(voiceEndpoint);\n    endpoint.path += \"?\" + querystring.stringify(data);\n    _options.logger.info(\n      \"sending TTS message to \" + data.to + \" with message \" + data.text\n    );\n    sendRequest(endpoint, \"POST\", function (err, apiResponse) {\n      if (!err && apiResponse.status && apiResponse.status > 0) {\n        sendError(callback, new Error(apiResponse[\"error-text\"]), apiResponse);\n      } else {\n        if (callback) callback(err, apiResponse);\n      }\n    });\n  }\n}\n\nexports.sendTTSMessage = function (recipient, message, opts, callback) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    sendVoiceMessage(ttsEndpoint, opts, callback);\n  }\n};\n\nexports.sendTTSPromptWithCapture = function (\n  recipient,\n  message,\n  maxDigits,\n  byeText,\n  opts,\n  callback\n) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"bye_text\"] = byeText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\n\nexports.sendTTSPromptWithConfirm = function (\n  recipient,\n  message,\n  maxDigits,\n  pinCode,\n  byeText,\n  failedText,\n  opts,\n  callback\n) {\n  if (!message) {\n    sendError(callback, new Error(ERROR_MESSAGES.msg));\n  } else if (!maxDigits || isNaN(maxDigits) || maxDigits.length > 16) {\n    sendError(callback, new Error(ERROR_MESSAGES.maxDigits));\n  } else if (!pinCode || pinCode.length !== maxDigits) {\n    sendError(callback, new Error(ERROR_MESSAGES.pinCode));\n  } else if (!byeText) {\n    sendError(callback, new Error(ERROR_MESSAGES.byeText));\n  } else if (!failedText) {\n    sendError(callback, new Error(ERROR_MESSAGES.failedText));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"text\"] = message;\n    opts[\"max_digits\"] = maxDigits;\n    opts[\"pin_code\"] = pinCode;\n    opts[\"bye_text\"] = byeText;\n    opts[\"failed_text\"] = failedText;\n    sendVoiceMessage(ttsPromptEndpoint, opts, callback);\n  }\n};\n\nexports.call = function (recipient, answerUrl, opts, callback) {\n  if (!answerUrl) {\n    sendError(callback, new Error(ERROR_MESSAGES.answerUrl));\n  } else {\n    if (!opts) {\n      opts = {};\n    }\n    opts[\"to\"] = recipient;\n    opts[\"answer_url\"] = answerUrl;\n    sendVoiceMessage(callEndpoint, opts, callback);\n  }\n};\n\nfunction sendError(callback, err, returnData) {\n  // Throw the error in case if there is no callback passed\n  if (callback) {\n    callback(err, returnData);\n  } else {\n    throw err;\n  }\n}\n"],"mappings":"AAAA;;AAEA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;AAEA,IAAIC,OAAO,GAAG;EACZC,IAAI,EAAE,gBADM;EAEZC,IAAI,EAAE;AAFM,CAAd;AAIA,IAAIC,aAAa,GAAG;EAClBF,IAAI,EAAE,gBADY;EAElBC,IAAI,EAAE;AAFY,CAApB;AAIA,IAAIE,WAAW,GAAG;EAChBH,IAAI,EAAE,eADU;EAEhBC,IAAI,EAAE;AAFU,CAAlB;AAIA,IAAIG,iBAAiB,GAAG;EACtBJ,IAAI,EAAE,eADgB;EAEtBC,IAAI,EAAE;AAFgB,CAAxB;AAIA,IAAII,YAAY,GAAG;EACjBL,IAAI,EAAE,gBADW;EAEjBC,IAAI,EAAE;AAFW,CAAnB;AAIA,IAAIK,cAAc,GAAG;EACnBN,IAAI,EAAE,eADa;EAEnBC,IAAI,EAAE;AAFa,CAArB;AAIA,IAAIM,mBAAmB,GAAG;EACxBP,IAAI,EAAE,eADkB;EAExBC,IAAI,EAAE;AAFkB,CAA1B;AAIA,IAAIO,qBAAqB,GAAG;EAC1BR,IAAI,EAAE,eADoB;EAE1BC,IAAI,EAAE;AAFoB,CAA5B;AAIA,IAAIQ,oBAAoB,GAAG;EACzBT,IAAI,EAAE,eADmB;EAEzBC,IAAI,EAAE;AAFmB,CAA3B;AAIA,IAAIS,UAAU,GAAG;EACfV,IAAI,EAAE,eADS;EAEfC,IAAI,EAAE;AAFS,CAAjB;AAIA,IAAIU,eAAe,GAAG;EACpBX,IAAI,EAAE,eADc;EAEpBC,IAAI,EAAE;AAFc,CAAtB;AAIA,IAAIW,kBAAkB,GAAG;EACvBZ,IAAI,EAAE,eADiB;EAEvBC,IAAI,EAAE;AAFiB,CAAzB;AAIA,IAAIY,kBAAkB,GAAG;EACvBb,IAAI,EAAE,eADiB;EAEvBC,IAAI,EAAE;AAFiB,CAAzB;AAIA,IAAIa,EAAE,GAAG,EAAT;AACA,IAAIC,aAAa,GAAG,IAAIC,MAAJ,CAAW,eAAX,CAApB;AAEA,IAAIC,QAAQ,GAAG,IAAf,C,CAEA;;AACA,IAAIC,cAAc,GAAG;EACnBC,MAAM,EAAE,sBADW;EAEnBC,EAAE,EAAE,oBAFe;EAGnBC,GAAG,EAAE,sBAHc;EAInBC,SAAS,EAAE,sCAJQ;EAKnBC,WAAW,EAAE,sBALM;EAMnBC,MAAM,EAAE,uBANW;EAOnBC,IAAI,EAAE,sCAPa;EAQnBC,GAAG,EAAE,qCARc;EASnBC,KAAK,EAAE,mCATY;EAUnBC,GAAG,EAAE,iCAVc;EAWnBC,SAAS,EAAE,mCAXQ;EAYnBC,OAAO,EAAE,iCAZU;EAanBC,OAAO,EAAE,kCAbU;EAcnBC,UAAU,EAAE,qCAdO;EAenBC,SAAS,EAAE,6BAfQ;EAgBnBC,gBAAgB,EAAE,gDAhBC;EAiBnBC,qBAAqB,EAAE,mDAjBJ;EAkBnBC,uBAAuB,EACrB,0DAnBiB;EAoBnBC,sBAAsB,EACpB,sDArBiB;EAsBnBC,+BAA+B,EAC7B,uDAvBiB;EAwBnBC,uBAAuB,EAAE,kCAxBN;EAyBnBC,2BAA2B,EACzB,gGA1BiB;EA2BnBC,kBAAkB,EAChB,2FA5BiB;EA6BnBC,OAAO,EAAE;AA7BU,CAArB;AAgCAC,OAAO,CAACC,UAAR,GAAqB,UAAUC,IAAV,EAAgBC,OAAhB,EAAyBC,OAAzB,EAAkC;EACrD;EACA;EACA;EACAF,IAAI,GAAGA,IAAI,IAAI,EAAf;EACAC,OAAO,GAAGA,OAAO,IAAI,EAArB;EAEAhC,EAAE,GAAG;IACHkC,OAAO,EAAEH,IADN;IAEHI,UAAU,EAAEH;EAFT,CAAL;EAIA7B,QAAQ,GAAG8B,OAAX;EAEA,IAAI9B,QAAQ,CAACiC,QAAb,EAAuB;IACrBnD,OAAO,CAACC,IAAR,GAAeiB,QAAQ,CAACiC,QAAxB;IACAhD,aAAa,CAACF,IAAd,GAAqBiB,QAAQ,CAACiC,QAA9B;IACA7C,YAAY,CAACL,IAAb,GAAoBiB,QAAQ,CAACiC,QAA7B;EACD;EAED,IAAIjC,QAAQ,CAACkC,OAAb,EAAsB;IACpBhD,WAAW,CAACH,IAAZ,GAAmBiB,QAAQ,CAACkC,OAA5B;IACA/C,iBAAiB,CAACJ,IAAlB,GAAyBiB,QAAQ,CAACkC,OAAlC;IACA7C,cAAc,CAACN,IAAf,GAAsBiB,QAAQ,CAACkC,OAA/B;IACA5C,mBAAmB,CAACP,IAApB,GAA2BiB,QAAQ,CAACkC,OAApC;IACA3C,qBAAqB,CAACR,IAAtB,GAA6BiB,QAAQ,CAACkC,OAAtC;IACA1C,oBAAoB,CAACT,IAArB,GAA4BiB,QAAQ,CAACkC,OAArC;IACAzC,UAAU,CAACV,IAAX,GAAkBiB,QAAQ,CAACkC,OAA3B;IACAxC,eAAe,CAACX,IAAhB,GAAuBiB,QAAQ,CAACkC,OAAhC;IACAvC,kBAAkB,CAACZ,IAAnB,GAA0BiB,QAAQ,CAACkC,OAAnC;IACAtC,kBAAkB,CAACb,IAAnB,GAA0BiB,QAAQ,CAACkC,OAAnC;EACD;AACF,CA/BD;AAiCAR,OAAO,CAACS,iBAAR,GAA4B,UAAUjC,MAAV,EAAkBkC,SAAlB,EAA6B5B,IAA7B,EAAmCC,GAAnC,EAAwC4B,QAAxC,EAAkD;EAC5E,IAAI,CAAC7B,IAAL,EAAW;IACT8B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACO,IAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACC,GAAL,EAAU;IACf6B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACQ,GAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL+B,WAAW,CACT;MACEC,IAAI,EAAEvC,MADR;MAEEC,EAAE,EAAEiC,SAFN;MAGEM,IAAI,EAAE,QAHR;MAIElC,IAAI,EAAEA,IAJR;MAKEC,GAAG,EAAEA;IALP,CADS,EAQT4B,QARS,CAAX;EAUD;AACF,CAjBD;AAmBAX,OAAO,CAACiB,kBAAR,GAA6B,UAC3BzC,MAD2B,EAE3BkC,SAF2B,EAG3B1B,KAH2B,EAI3BC,GAJ2B,EAK3BiC,QAL2B,EAM3BP,QAN2B,EAO3B;EACA,IAAI,CAAC3B,KAAL,EAAY;IACV4B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACS,KAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACC,GAAL,EAAU;IACf2B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACU,GAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAI,OAAOiC,QAAP,KAAoB,UAAxB,EAAoC;MAClCP,QAAQ,GAAGO,QAAX;MACAA,QAAQ,GAAG,QAAX;IACD;IACDJ,WAAW,CACT;MACEC,IAAI,EAAEvC,MADR;MAEEC,EAAE,EAAEiC,SAFN;MAGEM,IAAI,EAAE,SAHR;MAIEhC,KAAK,EAAEA,KAJT;MAKEkC,QAAQ,EAAEA,QALZ;MAMEjC,GAAG,EAAEA;IANP,CADS,EAST0B,QATS,CAAX;EAWD;AACF,CA7BD;AA+BAX,OAAO,CAACmB,eAAR,GAA0B,UACxB3C,MADwB,EAExBkC,SAFwB,EAGxBU,OAHwB,EAIxBC,IAJwB,EAKxBV,QALwB,EAMxB;EACA,IAAI,CAACS,OAAL,EAAc;IACZR,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACG,GAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAI,CAACiC,QAAL,EAAe;MACbA,QAAQ,GAAGU,IAAX;MACAA,IAAI,GAAG,EAAP;IACD;IACDA,IAAI,CAAC,MAAD,CAAJ,GAAe7C,MAAf;IACA6C,IAAI,CAAC,IAAD,CAAJ,GAAaX,SAAb;IACAW,IAAI,CAAC,MAAD,CAAJ,GAAeD,OAAf;IACAN,WAAW,CAACO,IAAD,EAAOV,QAAP,CAAX;EACD;AACF,CAnBD;AAqBAX,OAAO,CAACc,WAAR,GAAsB,UAAUO,IAAV,EAAgBV,QAAhB,EAA0B;EAC9CG,WAAW,CAACO,IAAD,EAAOV,QAAP,CAAX;AACD,CAFD;AAGA,SAASG,WAATA,CAAqBQ,IAArB,EAA2BX,QAA3B,EAAqC;EACnC,IAAI,CAACW,IAAI,CAACP,IAAV,EAAgB;IACdH,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACC,MAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAAC8C,IAAI,CAAC7C,EAAV,EAAc;IACnBmC,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACE,EAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAInB,IAAI,GAAGiE,KAAK,CAACnE,OAAD,CAAhB;IACAE,IAAI,CAACA,IAAL,IAAa,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBF,IAAtB,CAAnB;IACAhD,QAAQ,CAACmD,MAAT,CAAgBC,IAAhB,CACE,0BACEJ,IAAI,CAACP,IADP,GAEE,MAFF,GAGEO,IAAI,CAAC7C,EAHP,GAIE,gBAJF,GAKE6C,IAAI,CAACK,IANT;IAQAC,WAAW,CAACtE,IAAD,EAAO,MAAP,EAAe,UAAUuE,GAAV,EAAeC,WAAf,EAA4B;MACpD,IAAI,CAACD,GAAD,IAAQC,WAAW,CAACC,MAApB,IAA8BD,WAAW,CAACE,QAAZ,CAAqB,CAArB,EAAwBD,MAAxB,GAAiC,CAAnE,EAAsE;QACpEnB,SAAS,CACPD,QADO,EAEP,IAAIE,KAAJ,CAAUiB,WAAW,CAACE,QAAZ,CAAqB,CAArB,EAAwB,YAAxB,CAAV,CAFO,EAGPF,WAHO,CAAT;MAKD,CAND,MAMO;QACL,IAAInB,QAAJ,EAAcA,QAAQ,CAACkB,GAAD,EAAMC,WAAN,CAAR;MACf;IACF,CAVU,CAAX;EAWD;AACF;AAED,SAASG,gBAATA,CAA0BjB,IAA1B,EAAgCN,SAAhC,EAA2CwB,aAA3C,EAA0Db,IAA1D,EAAgEV,QAAhE,EAA0E;EACxE,IAAI,CAACD,SAAL,EAAgB;IACdE,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACE,EAAzB,CAAX,CAAT;EACD;EACD,IAAI,CAACyD,aAAD,IAAkB,CAACC,MAAM,CAACC,IAAP,CAAYF,aAAZ,CAAvB,EAAmD;IACjDtB,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACI,SAAzB,CAAX,CAAT;EACD;EACD0C,IAAI,GAAGA,IAAI,IAAI,EAAf;EACA,IAAI/D,IAAI,GAAGiE,KAAK,CAAChE,aAAD,CAAhB;EACAD,IAAI,CAACA,IAAL,GAAYA,IAAI,CAACA,IAAL,CAAU+E,OAAV,CAAkB,SAAlB,EAA6BrB,IAA7B,CAAZ;EACAmB,MAAM,CAACC,IAAP,CAAYF,aAAZ,EAA2BI,OAA3B,CAAmC,UAAUC,GAAV,EAAe;IAChDlB,IAAI,CAACkB,GAAD,CAAJ,GAAYL,aAAa,CAACK,GAAD,CAAzB;EACD,CAFD;EAGAlB,IAAI,CAAC5C,EAAL,GAAUiC,SAAV;EACApD,IAAI,CAACA,IAAL,IAAa,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBH,IAAtB,CAAnB;EACA/C,QAAQ,CAACmD,MAAT,CAAgBC,IAAhB,CACE,oCACEV,IADF,GAEE,MAFF,GAGEN,SAHF,GAIE,mBAJF,GAKE8B,IAAI,CAAChB,SAAL,CAAeU,aAAf,CANJ;EAQAN,WAAW,CAACtE,IAAD,EAAO,MAAP,EAAe,UAAUuE,GAAV,EAAeC,WAAf,EAA4B;IACpD,IAAI,CAACD,GAAD,IAAQC,WAAW,CAACC,MAApB,IAA8BD,WAAW,CAACE,QAAZ,CAAqB,CAArB,EAAwBD,MAAxB,GAAiC,CAAnE,EAAsE;MACpEnB,SAAS,CACPD,QADO,EAEP,IAAIE,KAAJ,CAAUiB,WAAW,CAACE,QAAZ,CAAqB,CAArB,EAAwB,YAAxB,CAAV,CAFO,EAGPF,WAHO,CAAT;IAKD,CAND,MAMO;MACL,IAAInB,QAAJ,EAAcA,QAAQ,CAACkB,GAAD,EAAMC,WAAN,CAAR;IACf;EACF,CAVU,CAAX;AAWD;AACD9B,OAAO,CAACyC,cAAR,GAAyB,UAAU/B,SAAV,EAAqBwB,aAArB,EAAoCb,IAApC,EAA0CV,QAA1C,EAAoD;EAC3EsB,gBAAgB,CAAC,OAAD,EAAUvB,SAAV,EAAqBwB,aAArB,EAAoCb,IAApC,EAA0CV,QAA1C,CAAhB;AACD,CAFD;AAGAX,OAAO,CAAC0C,YAAR,GAAuB,UAAUhC,SAAV,EAAqBwB,aAArB,EAAoCb,IAApC,EAA0CV,QAA1C,EAAoD;EACzEsB,gBAAgB,CAAC,KAAD,EAAQvB,SAAR,EAAmBwB,aAAnB,EAAkCb,IAAlC,EAAwCV,QAAxC,CAAhB;AACD,CAFD;AAGAX,OAAO,CAAC2C,kBAAR,GAA6B,UAC3BjC,SAD2B,EAE3BwB,aAF2B,EAG3Bb,IAH2B,EAI3BV,QAJ2B,EAK3B;EACAsB,gBAAgB,CAAC,WAAD,EAAcvB,SAAd,EAAyBwB,aAAzB,EAAwCb,IAAxC,EAA8CV,QAA9C,CAAhB;AACD,CAPD;AASA,SAASY,KAATA,CAAeqB,CAAf,EAAkB;EAChB,OAAOJ,IAAI,CAACK,KAAL,CAAWL,IAAI,CAAChB,SAAL,CAAeoB,CAAf,CAAX,CAAP;AACD;AAED,SAASE,WAATA,CAAqBC,MAArB,EAA6B;EAC3B,OAAO;IAAEzF,IAAI,EAAEyF;EAAR,CAAP;AACD;AAED,SAASnB,WAATA,CAAqBoB,QAArB,EAA+BC,MAA/B,EAAuCtC,QAAvC,EAAiD;EAC/CqC,QAAQ,CAAC1F,IAAT,GACE0F,QAAQ,CAAC1F,IAAT,IACC0F,QAAQ,CAAC1F,IAAT,CAAc4F,OAAd,CAAsB,GAAtB,IAA6B,CAA7B,GAAiC,GAAjC,GAAuC,GADxC,IAEAhG,WAAW,CAACsE,SAAZ,CAAsBrD,EAAtB,CAHF;EAIAG,QAAQ,CAAC6E,UAAT,CAAoBC,OAApB,CAA4BJ,QAA5B,EAAsCC,MAAtC,EAA8CtC,QAA9C;AACD;AAEDX,OAAO,CAACqD,YAAR,GAAuB,UAAU1C,QAAV,EAAoB;EACzC,IAAI2C,eAAe,GAAGR,WAAW,CAAC,sBAAD,CAAjC;EACAlB,WAAW,CAAC0B,eAAD,EAAkB3C,QAAlB,CAAX;AACD,CAHD;AAKAX,OAAO,CAACuD,UAAR,GAAqB,UAAUnD,OAAV,EAAmBO,QAAnB,EAA6B;EAChD,IAAI6C,eAAe,GAAGV,WAAW,CAAC,kBAAD,CAAjC;EACA,IAAI,OAAO1C,OAAP,KAAmB,UAAvB,EAAmC;IACjCO,QAAQ,GAAGP,OAAX;EACD,CAFD,MAEO,IAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;IACtCoD,eAAe,CAAClG,IAAhB,GAAuBkG,eAAe,CAAClG,IAAhB,GAAuB,GAA9C;IACA,KAAK,IAAIiF,GAAT,IAAgBnC,OAAhB,EAAyB;MACvBoD,eAAe,CAAClG,IAAhB,GACEkG,eAAe,CAAClG,IAAhB,GAAuBiF,GAAvB,GAA6B,GAA7B,GAAmCnC,OAAO,CAACmC,GAAD,CAA1C,GAAkD,GADpD;IAED;EACF,CANM,MAMA;IACL3B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACuB,kBAAzB,CAAX,CAAT;IACA;EACD;EACD8B,WAAW,CAAC4B,eAAD,EAAkB7C,QAAlB,CAAX;AACD,CAfD;AAiBAX,OAAO,CAACyD,aAAR,GAAwB,UAAUC,WAAV,EAAuBC,OAAvB,EAAgChD,QAAhC,EAA0C;EAChE,IAAI,CAAC+C,WAAD,IAAgBA,WAAW,CAACE,MAAZ,KAAuB,CAA3C,EAA8C;IAC5ChD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACK,WAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAIiF,cAAc,GAAGf,WAAW,CAAC,gBAAD,CAAhC;IACAe,cAAc,CAACvG,IAAf,IAAuB,cAAcoG,WAArC;IACA,IAAI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC;MACjChD,QAAQ,GAAGgD,OAAX;IACD,CAFD,MAEO,IAAI,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;MACtCE,cAAc,CAACvG,IAAf,GAAsBuG,cAAc,CAACvG,IAAf,GAAsB,GAA5C;MACA,KAAK,IAAIwG,GAAT,IAAgBH,OAAhB,EAAyB;QACvBE,cAAc,CAACvG,IAAf,GACEuG,cAAc,CAACvG,IAAf,GAAsBwG,GAAtB,GAA4B,GAA5B,GAAkCH,OAAO,CAACG,GAAD,CAAzC,GAAiD,GADnD;MAED;IACF,CANM,MAMA;MACLD,cAAc,CAACvG,IAAf,GAAsBuG,cAAc,CAACvG,IAAf,GAAsB,WAAtB,GAAoCqG,OAA1D;IACD;IACD/B,WAAW,CAACiC,cAAD,EAAiBlD,QAAjB,CAAX;EACD;AACF,CAnBD;AAqBAX,OAAO,CAAC+D,SAAR,GAAoB,UAAUL,WAAV,EAAuB7E,MAAvB,EAA+B8B,QAA/B,EAAyC;EAC3D,IAAI,CAAC+C,WAAD,IAAgBA,WAAW,CAACE,MAAZ,IAAsB,CAA1C,EAA6C;IAC3ChD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACK,WAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACC,MAAL,EAAa;IAClB+B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACM,MAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAImF,WAAW,GAAGlB,WAAW,CAAC,aAAD,CAA7B;IACAkB,WAAW,CAAC1G,IAAZ,IAAoB,cAAcoG,WAAd,GAA4B,UAA5B,GAAyC7E,MAA7D;IACA+C,WAAW,CAACoC,WAAD,EAAc,MAAd,EAAsBrD,QAAtB,CAAX;EACD;AACF,CAVD;AAYAX,OAAO,CAACiE,YAAR,GAAuB,UAAUP,WAAV,EAAuB7E,MAAvB,EAA+B8B,QAA/B,EAAyC;EAC9D,IAAI,CAAC+C,WAAD,IAAgBA,WAAW,CAACE,MAAZ,KAAuB,CAA3C,EAA8C;IAC5ChD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACK,WAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACC,MAAL,EAAa;IAClB+B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACM,MAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAIqF,cAAc,GAAGpB,WAAW,CAAC,gBAAD,CAAhC;IACAoB,cAAc,CAAC5G,IAAf,IAAuB,cAAcoG,WAAd,GAA4B,UAA5B,GAAyC7E,MAAhE;IACA+C,WAAW,CAACsC,cAAD,EAAiB,MAAjB,EAAyBvD,QAAzB,CAAX;EACD;AACF,CAVD;AAYAX,OAAO,CAACiE,YAAR,GAAuB,UAAUP,WAAV,EAAuB7E,MAAvB,EAA+B8B,QAA/B,EAAyC;EAC9D,IAAI,CAAC+C,WAAD,IAAgBA,WAAW,CAACE,MAAZ,KAAuB,CAA3C,EAA8C;IAC5ChD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACK,WAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACC,MAAL,EAAa;IAClB+B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACM,MAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAIqF,cAAc,GAAGpB,WAAW,CAAC,gBAAD,CAAhC;IACAoB,cAAc,CAAC5G,IAAf,IAAuB,cAAcoG,WAAd,GAA4B,UAA5B,GAAyC7E,MAAhE;IACA+C,WAAW,CAACsC,cAAD,EAAiB,MAAjB,EAAyBvD,QAAzB,CAAX;EACD;AACF,CAVD;AAYAX,OAAO,CAACmE,YAAR,GAAuB,UAAUT,WAAV,EAAuB7E,MAAvB,EAA+BuF,MAA/B,EAAuCzD,QAAvC,EAAiD;EACtE,IAAI,CAAC+C,WAAD,IAAgBA,WAAW,CAACE,MAAZ,KAAuB,CAA3C,EAA8C;IAC5ChD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACK,WAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACC,MAAL,EAAa;IAClB+B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACM,MAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAIwF,cAAc,GAAGvB,WAAW,CAAC,gBAAD,CAAhC;IACAuB,cAAc,CAAC/G,IAAf,IAAuB,cAAcoG,WAAd,GAA4B,UAA5B,GAAyC7E,MAAhE;IACAwF,cAAc,CAAC/G,IAAf,GAAsB+G,cAAc,CAAC/G,IAAf,GAAsB,GAA5C;IACA,KAAK,IAAIwG,GAAT,IAAgBM,MAAhB,EAAwB;MACtBC,cAAc,CAAC/G,IAAf,GACE+G,cAAc,CAAC/G,IAAf,GAAsBwG,GAAtB,GAA4B,GAA5B,GAAkCQ,kBAAkB,CAACF,MAAM,CAACN,GAAD,CAAP,CAApD,GAAoE,GADtE;IAED;IACDlC,WAAW,CAACyC,cAAD,EAAiB,MAAjB,EAAyB1D,QAAzB,CAAX;EACD;AACF,CAfD;AAiBAX,OAAO,CAACuE,cAAR,GAAyB,UAAUC,SAAV,EAAqB7D,QAArB,EAA+B;EACtD,IAAI8D,gBAAgB,GAAG3B,WAAW,CAAC,mBAAD,CAAlC;EACA2B,gBAAgB,CAACnH,IAAjB,IAAyB,gBAAgBgH,kBAAkB,CAACE,SAAD,CAA3D;EACA5C,WAAW,CAAC6C,gBAAD,EAAmB,MAAnB,EAA2B9D,QAA3B,CAAX;AACD,CAJD;AAMAX,OAAO,CAAC0E,mBAAR,GAA8B,UAAUC,MAAV,EAAkBhE,QAAlB,EAA4B;EACxD,IAAI8D,gBAAgB,GAAG3B,WAAW,CAAC,mBAAD,CAAlC;EACA2B,gBAAgB,CAACnH,IAAjB,IAAyB,oBAAoBgH,kBAAkB,CAACK,MAAD,CAA/D;EACA/C,WAAW,CAAC6C,gBAAD,EAAmB,MAAnB,EAA2B9D,QAA3B,CAAX;AACD,CAJD;AAMAX,OAAO,CAAC4E,mBAAR,GAA8B,UAAUD,MAAV,EAAkBhE,QAAlB,EAA4B;EACxD,IAAI8D,gBAAgB,GAAG3B,WAAW,CAAC,mBAAD,CAAlC;EACA2B,gBAAgB,CAACnH,IAAjB,IAAyB,oBAAoBgH,kBAAkB,CAACK,MAAD,CAA/D;EACA/C,WAAW,CAAC6C,gBAAD,EAAmB,MAAnB,EAA2B9D,QAA3B,CAAX;AACD,CAJD;AAMAX,OAAO,CAAC6E,YAAR,GAAuB,UAAUC,WAAV,EAAuBnE,QAAvB,EAAiC;EACtD,IAAI,CAACmE,WAAW,CAACC,MAAb,IAAuB,CAACD,WAAW,CAACE,KAAxC,EAA+C;IAC7CpE,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACgB,gBAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAI0F,SAAS,GAAG1D,KAAK,CAAC5D,cAAD,CAArB;IACAsH,SAAS,CAAC3H,IAAV,IAAkB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBsD,WAAtB,CAAxB;IACAlD,WAAW,CAACqD,SAAD,EAAYtE,QAAZ,CAAX;EACD;AACF,CARD;AAUAX,OAAO,CAACkF,kBAAR,GAA6B,UAAUJ,WAAV,EAAuBnE,QAAvB,EAAiC;EAC5D,IAAI,CAACmE,WAAW,CAACK,UAAb,IAA2B,CAACL,WAAW,CAACM,IAA5C,EAAkD;IAChDxE,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACiB,qBAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAIyF,SAAS,GAAG1D,KAAK,CAAC3D,mBAAD,CAArB;IACAqH,SAAS,CAAC3H,IAAV,IAAkB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBsD,WAAtB,CAAxB;IACAlD,WAAW,CAACqD,SAAD,EAAYtE,QAAZ,CAAX;EACD;AACF,CARD;AAUAX,OAAO,CAACqF,oBAAR,GAA+B,UAAUP,WAAV,EAAuBnE,QAAvB,EAAiC;EAC9D,IAAI,CAACmE,WAAW,CAACK,UAAb,IAA2B,CAACL,WAAW,CAACQ,GAA5C,EAAiD;IAC/C1E,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACkB,uBAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAIwF,SAAS,GAAG1D,KAAK,CAAC1D,qBAAD,CAArB;IACAoH,SAAS,CAAC3H,IAAV,IAAkB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBsD,WAAtB,CAAxB;IACAlD,WAAW,CAACqD,SAAD,EAAYtE,QAAZ,CAAX;EACD;AACF,CARD;AAUAX,OAAO,CAACuF,mBAAR,GAA8B,UAAUC,UAAV,EAAsB7E,QAAtB,EAAgC;EAC5D,IAAI8E,cAAc,GAAG,EAArB;EACA,IAAI,CAACD,UAAL,EAAiB;IACf5E,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACmB,sBAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAIgG,KAAK,CAACC,OAAN,CAAcH,UAAd,CAAJ,EAA+B;MAC7B,IAAIA,UAAU,CAAC5B,MAAX,KAAsB,CAA1B,EAA6B;QAC3B6B,cAAc,CAACN,UAAf,GAA4BK,UAA5B;MACD,CAFD,MAEO;QACLC,cAAc,CAACG,WAAf,GAA6BJ,UAA7B;MACD;IACF,CAND,MAMO;MACLC,cAAc,CAACN,UAAf,GAA4BK,UAA5B;IACD;IACD,IAAIP,SAAS,GAAG1D,KAAK,CAACzD,oBAAD,CAArB;IACAmH,SAAS,CAAC3H,IAAV,IAAkB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBiE,cAAtB,CAAxB;IACA7D,WAAW,CAACqD,SAAD,EAAYtE,QAAZ,CAAX;EACD;AACF,CAlBD;AAoBAX,OAAO,CAAC6F,aAAR,GAAwB,UAAUf,WAAV,EAAuBnE,QAAvB,EAAiC;EACvDmF,kBAAkB,CAAChB,WAAD,EAAcnE,QAAd,CAAlB;AACD,CAFD;AAIAX,OAAO,CAAC+F,kBAAR,GAA6B,UAAUjB,WAAV,EAAuBnE,QAAvB,EAAiC;EAC5DqF,mBAAmB,CAAChI,eAAD,EAAkB8G,WAAlB,EAA+BnE,QAA/B,CAAnB;AACD,CAFD;AAIAX,OAAO,CAACiG,qBAAR,GAAgC,UAAUnB,WAAV,EAAuBnE,QAAvB,EAAiC;EAC/DqF,mBAAmB,CAAC/H,kBAAD,EAAqB6G,WAArB,EAAkCnE,QAAlC,CAAnB;AACD,CAFD;AAIAX,OAAO,CAACkG,qBAAR,GAAgC,UAAUpB,WAAV,EAAuBnE,QAAvB,EAAiC;EAC/DqF,mBAAmB,CAAC9H,kBAAD,EAAqB4G,WAArB,EAAkCnE,QAAlC,CAAnB;AACD,CAFD;AAIAX,OAAO,CAACmG,0BAAR,GAAqC,UAAUrB,WAAV,EAAuBnE,QAAvB,EAAiC;EACpEmF,kBAAkB,CAAChB,WAAD,EAAcnE,QAAd,CAAlB;AACD,CAFD;AAIA,SAASmF,kBAATA,CAA4BhB,WAA5B,EAAyCnE,QAAzC,EAAmD;EACjD,IAAI,CAACmE,WAAW,CAACC,MAAb,IAAuB,CAACD,WAAW,CAACnE,QAAxC,EAAkD;IAChDC,SAAS,CACPD,QADO,EAEP,IAAIE,KAAJ,CAAUtC,cAAc,CAACoB,+BAAzB,CAFO,CAAT;EAID,CALD,MAKO;IACL,IAAIyG,SAAS,GAAG7E,KAAK,CAACxD,UAAD,CAArB;IACAqI,SAAS,CAAC9I,IAAV,IAAkB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBsD,WAAtB,CAAxB;IACAlD,WAAW,CAACwE,SAAD,EAAYzF,QAAZ,CAAX;EACD;AACF;AAED,SAASqF,mBAATA,CAA6BhD,QAA7B,EAAuC8B,WAAvC,EAAoDnE,QAApD,EAA8D;EAC5D,IAAI0F,cAAc,CAACvB,WAAD,EAAcnE,QAAd,CAAlB,EAA2C;IACzC,IAAI2F,QAAJ;IACA,IAAI,OAAOxB,WAAP,KAAuB,QAA3B,EAAqC;MACnCwB,QAAQ,GAAG;QAAEvB,MAAM,EAAED;MAAV,CAAX;IACD,CAFD,MAEO;MACLwB,QAAQ,GAAGxB,WAAX;IACD;IACD,IAAIsB,SAAS,GAAG7E,KAAK,CAACyB,QAAD,CAArB;IACAoD,SAAS,CAAC9I,IAAV,IAAkB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsB8E,QAAtB,CAAxB;IACA1E,WAAW,CAACwE,SAAD,EAAYzF,QAAZ,CAAX;EACD;AACF;AACD,SAAS0F,cAATA,CAAwBvB,WAAxB,EAAqCnE,QAArC,EAA+C;EAC7C,IAAI,OAAOmE,WAAP,KAAuB,QAAvB,IAAmC,CAACA,WAAW,CAACC,MAApD,EAA4D;IAC1DnE,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACqB,uBAAzB,CAAX,CAAT;IACA,OAAO,KAAP;EACD,CAHD,MAGO,IACL,OAAOkF,WAAP,KAAuB,QAAvB,IACA,CAAC1G,aAAa,CAACmI,IAAd,CAAmBzB,WAAW,CAACC,MAA/B,CAFI,EAGL;IACAnE,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACsB,2BAAzB,CAAX,CAAT;IACA,OAAO,KAAP;EACD,CANM,MAMA,IACL,OAAOiF,WAAP,KAAuB,QAAvB,KACC,CAACA,WAAD,IAAgB,CAAC1G,aAAa,CAACmI,IAAd,CAAmBzB,WAAnB,CADlB,CADK,EAGL;IACAlE,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACsB,2BAAzB,CAAX,CAAT;IACA,OAAO,KAAP;EACD;EACD,OAAO,IAAP;AACD;AAED,SAAS2G,gBAATA,CAA0BC,aAA1B,EAAyCnF,IAAzC,EAA+CX,QAA/C,EAAyD;EACvD,IAAI,CAACW,IAAI,CAAC7C,EAAV,EAAc;IACZmC,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACE,EAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAIuE,QAAQ,GAAGzB,KAAK,CAACkF,aAAD,CAApB;IACAzD,QAAQ,CAAC1F,IAAT,IAAiB,MAAMJ,WAAW,CAACsE,SAAZ,CAAsBF,IAAtB,CAAvB;IACAhD,QAAQ,CAACmD,MAAT,CAAgBC,IAAhB,CACE,4BAA4BJ,IAAI,CAAC7C,EAAjC,GAAsC,gBAAtC,GAAyD6C,IAAI,CAACK,IADhE;IAGAC,WAAW,CAACoB,QAAD,EAAW,MAAX,EAAmB,UAAUnB,GAAV,EAAeC,WAAf,EAA4B;MACxD,IAAI,CAACD,GAAD,IAAQC,WAAW,CAACC,MAApB,IAA8BD,WAAW,CAACC,MAAZ,GAAqB,CAAvD,EAA0D;QACxDnB,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUiB,WAAW,CAAC,YAAD,CAArB,CAAX,EAAiDA,WAAjD,CAAT;MACD,CAFD,MAEO;QACL,IAAInB,QAAJ,EAAcA,QAAQ,CAACkB,GAAD,EAAMC,WAAN,CAAR;MACf;IACF,CANU,CAAX;EAOD;AACF;AAED9B,OAAO,CAAC0G,cAAR,GAAyB,UAAUhG,SAAV,EAAqBU,OAArB,EAA8BC,IAA9B,EAAoCV,QAApC,EAA8C;EACrE,IAAI,CAACS,OAAL,EAAc;IACZR,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACG,GAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAI,CAAC2C,IAAL,EAAW;MACTA,IAAI,GAAG,EAAP;IACD;IACDA,IAAI,CAAC,IAAD,CAAJ,GAAaX,SAAb;IACAW,IAAI,CAAC,MAAD,CAAJ,GAAeD,OAAf;IACAoF,gBAAgB,CAAChJ,WAAD,EAAc6D,IAAd,EAAoBV,QAApB,CAAhB;EACD;AACF,CAXD;AAaAX,OAAO,CAAC2G,wBAAR,GAAmC,UACjCjG,SADiC,EAEjCU,OAFiC,EAGjClC,SAHiC,EAIjCC,OAJiC,EAKjCkC,IALiC,EAMjCV,QANiC,EAOjC;EACA,IAAI,CAACS,OAAL,EAAc;IACZR,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACG,GAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACQ,SAAD,IAAc0H,KAAK,CAAC1H,SAAD,CAAnB,IAAkCA,SAAS,CAAC0E,MAAV,GAAmB,EAAzD,EAA6D;IAClEhD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACW,SAAzB,CAAX,CAAT;EACD,CAFM,MAEA,IAAI,CAACC,OAAL,EAAc;IACnByB,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACY,OAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAI,CAACkC,IAAL,EAAW;MACTA,IAAI,GAAG,EAAP;IACD;IACDA,IAAI,CAAC,IAAD,CAAJ,GAAaX,SAAb;IACAW,IAAI,CAAC,MAAD,CAAJ,GAAeD,OAAf;IACAC,IAAI,CAAC,YAAD,CAAJ,GAAqBnC,SAArB;IACAmC,IAAI,CAAC,UAAD,CAAJ,GAAmBlC,OAAnB;IACAqH,gBAAgB,CAAC/I,iBAAD,EAAoB4D,IAApB,EAA0BV,QAA1B,CAAhB;EACD;AACF,CAxBD;AA0BAX,OAAO,CAAC6G,wBAAR,GAAmC,UACjCnG,SADiC,EAEjCU,OAFiC,EAGjClC,SAHiC,EAIjCE,OAJiC,EAKjCD,OALiC,EAMjCE,UANiC,EAOjCgC,IAPiC,EAQjCV,QARiC,EASjC;EACA,IAAI,CAACS,OAAL,EAAc;IACZR,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACG,GAAzB,CAAX,CAAT;EACD,CAFD,MAEO,IAAI,CAACQ,SAAD,IAAc0H,KAAK,CAAC1H,SAAD,CAAnB,IAAkCA,SAAS,CAAC0E,MAAV,GAAmB,EAAzD,EAA6D;IAClEhD,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACW,SAAzB,CAAX,CAAT;EACD,CAFM,MAEA,IAAI,CAACE,OAAD,IAAYA,OAAO,CAACwE,MAAR,KAAmB1E,SAAnC,EAA8C;IACnD0B,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACa,OAAzB,CAAX,CAAT;EACD,CAFM,MAEA,IAAI,CAACD,OAAL,EAAc;IACnByB,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACY,OAAzB,CAAX,CAAT;EACD,CAFM,MAEA,IAAI,CAACE,UAAL,EAAiB;IACtBuB,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACc,UAAzB,CAAX,CAAT;EACD,CAFM,MAEA;IACL,IAAI,CAACgC,IAAL,EAAW;MACTA,IAAI,GAAG,EAAP;IACD;IACDA,IAAI,CAAC,IAAD,CAAJ,GAAaX,SAAb;IACAW,IAAI,CAAC,MAAD,CAAJ,GAAeD,OAAf;IACAC,IAAI,CAAC,YAAD,CAAJ,GAAqBnC,SAArB;IACAmC,IAAI,CAAC,UAAD,CAAJ,GAAmBjC,OAAnB;IACAiC,IAAI,CAAC,UAAD,CAAJ,GAAmBlC,OAAnB;IACAkC,IAAI,CAAC,aAAD,CAAJ,GAAsBhC,UAAtB;IACAmH,gBAAgB,CAAC/I,iBAAD,EAAoB4D,IAApB,EAA0BV,QAA1B,CAAhB;EACD;AACF,CAhCD;AAkCAX,OAAO,CAAC8G,IAAR,GAAe,UAAUpG,SAAV,EAAqBpB,SAArB,EAAgC+B,IAAhC,EAAsCV,QAAtC,EAAgD;EAC7D,IAAI,CAACrB,SAAL,EAAgB;IACdsB,SAAS,CAACD,QAAD,EAAW,IAAIE,KAAJ,CAAUtC,cAAc,CAACe,SAAzB,CAAX,CAAT;EACD,CAFD,MAEO;IACL,IAAI,CAAC+B,IAAL,EAAW;MACTA,IAAI,GAAG,EAAP;IACD;IACDA,IAAI,CAAC,IAAD,CAAJ,GAAaX,SAAb;IACAW,IAAI,CAAC,YAAD,CAAJ,GAAqB/B,SAArB;IACAkH,gBAAgB,CAAC9I,YAAD,EAAe2D,IAAf,EAAqBV,QAArB,CAAhB;EACD;AACF,CAXD;AAaA,SAASC,SAATA,CAAmBD,QAAnB,EAA6BkB,GAA7B,EAAkCkF,UAAlC,EAA8C;EAC5C;EACA,IAAIpG,QAAJ,EAAc;IACZA,QAAQ,CAACkB,GAAD,EAAMkF,UAAN,CAAR;EACD,CAFD,MAEO;IACL,MAAMlF,GAAN;EACD;AACF"},"metadata":{},"sourceType":"script","externalDependencies":[]}