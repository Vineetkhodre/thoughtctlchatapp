{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar fs = require(\"fs\");\nclass FilesResource {\n  /**\n   * The path to the `calls` resource.\n   */\n  static get PATH() {\n    return \"/v1/files\";\n  }\n  /**\n   * Creates a new FilesResource.\n   *\n   * @param {Credentials} creds - Credentials used when interacting with the Vonage API.\n   * @param {Object} options - additional options for the class.\n   */\n\n  constructor(creds, options) {\n    this.creds = creds;\n    this.options = options;\n  }\n  /**\n   * Get stream for a remote File\n   *\n   * @param {string} [fileIdOrUrl] - The unique identifier or URL for the file\n   * @param {function} callback - function to be called when the request completes.\n   */\n\n  get(fileIdOrUrl, callback) {\n    if (!fileIdOrUrl) {\n      throw new Error('\"fileIdOrUrl\" is a required parameter');\n    }\n    fileIdOrUrl = fileIdOrUrl.split(\"/\").pop(-1);\n    var config = {\n      host: this.options.apiHost || \"api.nexmo.com\",\n      path: \"\".concat(FilesResource.PATH, \"/\").concat(fileIdOrUrl),\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/octet-stream\",\n        Authorization: \"Bearer \".concat(this.creds.generateJwt())\n      }\n    };\n    this.options.httpClient.request(config, callback);\n  }\n  /**\n   * Save remote File locally\n   *\n   * @param {string} [fileIdOrUrl] - The unique identifier or URL for the file\n   * @param {string} [file] - Filename or file descriptor\n   * @param {function} callback - function to be called when the request completes.\n   */\n\n  save(fileIdOrUrl, file, callback) {\n    this.get(fileIdOrUrl, (error, data) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        this.__storeFile(data, file, callback);\n      }\n    });\n  }\n  __storeFile(data, file, callback) {\n    if (!Buffer.isBuffer(data)) {\n      data = JSON.stringify(data);\n    }\n    fs.writeFile(file, data, error => {\n      if (error) {\n        callback(error, null);\n      } else {\n        callback(null, file);\n      }\n    });\n  }\n}\nvar _default = FilesResource;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"names":["fs","require","FilesResource","PATH","constructor","creds","options","get","fileIdOrUrl","callback","Error","split","pop","config","host","apiHost","path","concat","method","headers","Authorization","generateJwt","httpClient","request","save","file","error","data","__storeFile","Buffer","isBuffer","JSON","stringify","writeFile"],"sources":["/Users/vineetkhodre/react-workspace/thoughtctlchatapp/node_modules/@vonage/server-sdk/src/FilesResource.js"],"sourcesContent":["\"use strict\";\n\nvar fs = require(\"fs\");\n\nclass FilesResource {\n  /**\n   * The path to the `calls` resource.\n   */\n  static get PATH() {\n    return \"/v1/files\";\n  }\n\n  /**\n   * Creates a new FilesResource.\n   *\n   * @param {Credentials} creds - Credentials used when interacting with the Vonage API.\n   * @param {Object} options - additional options for the class.\n   */\n  constructor(creds, options) {\n    this.creds = creds;\n    this.options = options;\n  }\n\n  /**\n   * Get stream for a remote File\n   *\n   * @param {string} [fileIdOrUrl] - The unique identifier or URL for the file\n   * @param {function} callback - function to be called when the request completes.\n   */\n  get(fileIdOrUrl, callback) {\n    if (!fileIdOrUrl) {\n      throw new Error('\"fileIdOrUrl\" is a required parameter');\n    }\n\n    fileIdOrUrl = fileIdOrUrl.split(\"/\").pop(-1);\n\n    var config = {\n      host: this.options.apiHost || \"api.nexmo.com\",\n      path: `${FilesResource.PATH}/${fileIdOrUrl}`,\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/octet-stream\",\n        Authorization: `Bearer ${this.creds.generateJwt()}`,\n      },\n    };\n\n    this.options.httpClient.request(config, callback);\n  }\n\n  /**\n   * Save remote File locally\n   *\n   * @param {string} [fileIdOrUrl] - The unique identifier or URL for the file\n   * @param {string} [file] - Filename or file descriptor\n   * @param {function} callback - function to be called when the request completes.\n   */\n  save(fileIdOrUrl, file, callback) {\n    this.get(fileIdOrUrl, (error, data) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        this.__storeFile(data, file, callback);\n      }\n    });\n  }\n\n  __storeFile(data, file, callback) {\n    if (!Buffer.isBuffer(data)) {\n      data = JSON.stringify(data);\n    }\n\n    fs.writeFile(file, data, (error) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        callback(null, file);\n      }\n    });\n  }\n}\n\nexport default FilesResource;\n"],"mappings":"AAAA;;;;;;AAEA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;AAEA,MAAMC,aAAN,CAAoB;EAClB;AACF;AACA;EACiB,WAAJC,IAAIA,CAAA,EAAG;IAChB,OAAO,WAAP;EACD;EAED;AACF;AACA;AACA;AACA;AACA;;EACEC,WAAWA,CAACC,KAAD,EAAQC,OAAR,EAAiB;IAC1B,KAAKD,KAAL,GAAaA,KAAb;IACA,KAAKC,OAAL,GAAeA,OAAf;EACD;EAED;AACF;AACA;AACA;AACA;AACA;;EACEC,GAAGA,CAACC,WAAD,EAAcC,QAAd,EAAwB;IACzB,IAAI,CAACD,WAAL,EAAkB;MAChB,MAAM,IAAIE,KAAJ,CAAU,uCAAV,CAAN;IACD;IAEDF,WAAW,GAAGA,WAAW,CAACG,KAAZ,CAAkB,GAAlB,EAAuBC,GAAvB,CAA2B,CAAC,CAA5B,CAAd;IAEA,IAAIC,MAAM,GAAG;MACXC,IAAI,EAAE,KAAKR,OAAL,CAAaS,OAAb,IAAwB,eADnB;MAEXC,IAAI,KAAAC,MAAA,CAAKf,aAAa,CAACC,IAAnB,OAAAc,MAAA,CAA2BT,WAA3B,CAFO;MAGXU,MAAM,EAAE,KAHG;MAIXC,OAAO,EAAE;QACP,gBAAgB,0BADT;QAEPC,aAAa,YAAAH,MAAA,CAAY,KAAKZ,KAAL,CAAWgB,WAAX,EAAZ;MAFN;IAJE,CAAb;IAUA,KAAKf,OAAL,CAAagB,UAAb,CAAwBC,OAAxB,CAAgCV,MAAhC,EAAwCJ,QAAxC;EACD;EAED;AACF;AACA;AACA;AACA;AACA;AACA;;EACEe,IAAIA,CAAChB,WAAD,EAAciB,IAAd,EAAoBhB,QAApB,EAA8B;IAChC,KAAKF,GAAL,CAASC,WAAT,EAAsB,CAACkB,KAAD,EAAQC,IAAR,KAAiB;MACrC,IAAID,KAAJ,EAAW;QACTjB,QAAQ,CAACiB,KAAD,EAAQ,IAAR,CAAR;MACD,CAFD,MAEO;QACL,KAAKE,WAAL,CAAiBD,IAAjB,EAAuBF,IAAvB,EAA6BhB,QAA7B;MACD;IACF,CAND;EAOD;EAEDmB,WAAWA,CAACD,IAAD,EAAOF,IAAP,EAAahB,QAAb,EAAuB;IAChC,IAAI,CAACoB,MAAM,CAACC,QAAP,CAAgBH,IAAhB,CAAL,EAA4B;MAC1BA,IAAI,GAAGI,IAAI,CAACC,SAAL,CAAeL,IAAf,CAAP;IACD;IAED3B,EAAE,CAACiC,SAAH,CAAaR,IAAb,EAAmBE,IAAnB,EAA0BD,KAAD,IAAW;MAClC,IAAIA,KAAJ,EAAW;QACTjB,QAAQ,CAACiB,KAAD,EAAQ,IAAR,CAAR;MACD,CAFD,MAEO;QACLjB,QAAQ,CAAC,IAAD,EAAOgB,IAAP,CAAR;MACD;IACF,CAND;EAOD;AA1EiB;eA6ELvB,a"},"metadata":{},"sourceType":"script","externalDependencies":[]}